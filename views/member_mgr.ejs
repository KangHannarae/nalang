<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>회원 목록</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<%- include('../include/nav.ejs') %>
  <h2>회원 목록 (관리자 전용)</h2>
  <table border="1">
    <tr>
      <th>아이디</th>
      <th>이름</th>
      <th>이메일</th>
      <th>가입일자</th>
      <th>권한</th>
      <th>수정</th>
      <th>삭제</th>
    </tr>
    <% members.forEach(member => { %>
    <tr>
      <td>
        <%= member.userid %>
      </td>
      <td>
        <form method="post" action="/update">
          <input type="hidden" name="userid" value="<%= member.userid %>" />
          <input name="username" value="<%= member.username %>" />
      </td>
      <td><%= member.email %></td>
      <td><%= member.created_at %></td>
      <td><%= member.user_type %></td>
      <td>
          <button type="submit">수정</button>
        </form>
      </td>
      <td>
        <form method="post" action="/remove">
          <input type="hidden" name="userid" value="<%= member.userid %>" />
          <button type="submit">삭제</button>
        </form>
      </td>
    </tr>
    <% }) %>
  </table>
  <a href="/logout">로그아웃</a>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
</body>
</html>
