<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>로그인 | NaLang</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="/stylesheets/nav.css" rel="stylesheet" />
  <link href="/stylesheets/login.css" rel="stylesheet" />
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const loginBtn = document.getElementById("loginBtn");
      const useridInput = document.getElementById("userid");
      const userpwInput = document.getElementById("passwd");

      loginBtn.disabled = true;

      function toggleLoginButton() {
          const username = useridInput.value.trim();
          const userpw = userpwInput.value.trim();

          loginBtn.disabled = !(username && userpw);
      }

      useridInput.addEventListener("input", toggleLoginButton);
      userpwInput.addEventListener("input", toggleLoginButton);
    });
  </script>
</head>
<body>
  <%- include('../include/nav.ejs') %>

  <main class="login-wrapper">
    <section class="login-box">
      <h2>로그인</h2>
      <form method="POST" action="/loginProc" novalidate>
        <div class="mb-3">
          <label for="userid">아이디</label>
          <input type="text" id="userid" name="userid" placeholder="아이디를 입력하세요" required autocomplete="username" />
        </div>
        <div class="mb-3">
          <label for="passwd">비밀번호</label>
          <input type="password" id="passwd" name="passwd" placeholder="비밀번호를 입력하세요" required autocomplete="current-password" />
        </div>
        <button type="submit" id="loginBtn" disabled>로그인</button>
      </form>
      <div class="links">
        <a href="/join" class="text-link">가입하기</a>
        <a href="#" class="text-link">비밀번호 찾기</a>
      </div>
    </section>
  </main>
   <% if (typeof msg !== 'undefined' && msg === 'success') { %>
        <script>alert('가입이 완료되었습니다.');</script>
    <% } else if (typeof msg !== 'undefined' && msg == 'fail') { %>
        <script>alert('아이디 및 비밀번호를 확인해주세요.');</script>
    <% } else if (typeof msg !== 'undefined' && msg==='logout') { %>
        <script>alert('로그아웃 되었습니다.');</script>
    <% } else if (typeof msg !== 'undefined' && msg==='authority') { %>
        <script>alert('접근 권한이 없습니다.');</script>
    <% } %>    
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
